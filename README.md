# üå¶Ô∏è WeatherHub ‚Äî Dockerized Weather Microservice System

**WeatherHub** ‚Äî —Ü–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∞ –ø–æ–≥–æ–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞, —Å—Ç–≤–æ—Ä–µ–Ω–∞ –¥–ª—è –ø–æ–∫–∞–∑—É,  
—è–∫ –º–æ–∂–Ω–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—Ç–∏ –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –∑ Docker Compose**.  

–ü—Ä–æ—î–∫—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ —Å—Ç–µ–∫—É **FastAPI**, **Redis**, **Nginx (frontend)** —ñ **Traefik**,  
–∞ –¥–∞–Ω—ñ –±–µ—Ä—É—Ç—å—Å—è –∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–∂–µ—Ä–µ–ª–∞ ‚Äî **Open-Meteo API**.

---

## üöÄ –°—É—Ç—å –ø—Ä–æ—î–∫—Ç—É

WeatherHub ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ ‚Äú–ø–æ–≥–æ–¥–Ω–∏–π —Å–∞–π—Ç‚Äù, –∞ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Ç–æ–≥–æ,  
—è–∫ –∫—ñ–ª—å–∫–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —è–∫ —î–¥–∏–Ω–∞ —Å–∏—Å—Ç–µ–º–∞:

- **FastAPI (weather-api)** ‚Äî –±–µ–∫–µ–Ω–¥, —è–∫–∏–π –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –∑ Open-Meteo, –∫–µ—à—É—î —É Redis  
- **Redis** ‚Äî –ø—Ä–æ–º—ñ–∂–Ω–µ —Å—Ö–æ–≤–∏—â–µ –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤  
- **Nginx (frontend)** ‚Äî —Å—Ç–∞—Ç–∏—á–Ω–∏–π –≤–µ–±—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –ø–æ–ª–µ–º –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è –º—ñ—Å—Ç–∞  
- **Traefik** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä, —è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—î –∑–∞–ø–∏—Ç–∏ –∑–∞ –¥–æ–º–µ–Ω–∞–º–∏  
- **Docker Compose** ‚Äî –≤—Å–µ –∑‚Äô—î–¥–Ω—É—î —ñ –ø—ñ–¥–Ω—ñ–º–∞—î –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é

---

## üß© –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üí Traefik ‚Üí Frontend (Nginx) ‚Üí FastAPI ‚Üí Open-Meteo / Redis
```

- **Frontend:** `app.<IP>.sslip.io`  
- **Backend:** `api.<IP>.sslip.io`  
- **Dashboard:** `traefik.<IP>.sslip.io`

Traefik –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —á–µ—Ä–µ–∑ Docker labels —ñ —Å—Ç–≤–æ—Ä—é—î –º–∞—Ä—à—Ä—É—Ç–∏ –±–µ–∑ —Ä—É—á–Ω–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

---

## ‚öôÔ∏è –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –º—ñ—Å—Ç–æ —É –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ.  
2. JS-—Å–∫—Ä–∏–ø—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç –Ω–∞ `/weather?city=Kyiv`.  
3. FastAPI —á–µ—Ä–µ–∑ Open-Meteo –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–∞ –ø–æ—Ç–æ—á–Ω—É —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É.  
4. –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–µ—à—É—î—Ç—å—Å—è —É Redis –Ω–∞ 5 —Ö–≤–∏–ª–∏–Ω.  
5. –ü–æ–≤—Ç–æ—Ä–Ω—ñ –∑–∞–ø–∏—Ç–∏ –≤—ñ–¥–¥–∞—é—Ç—å—Å—è –º–∏—Ç—Ç—î–≤–æ –∑ –∫–µ—à—É.  
6. –£—Å–µ —Ü–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Traefik –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ `Host()`.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
.
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf
‚îî‚îÄ‚îÄ weather-api/
    ‚îú‚îÄ‚îÄ Dockerfile
    ‚îú‚îÄ‚îÄ main.py
    ‚îî‚îÄ‚îÄ requirements.txt
```

---

## üèÉ‚Äç‚ôÇÔ∏è –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –í–∏–º–æ–≥–∏
- Docker Engine 24+  
- Docker Compose v2+  
- –ü–æ—Ä—Ç 80 –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –Ω–∞ —Ö–æ—Å—Ç—ñ

### –ö–æ–º–∞–Ω–¥–∏
```bash
git clone https://github.com/Stanislavwx/weatherhub.git
cd weatherhub

cp .env.example .env
# –í–∫–∞–∂—ñ—Ç—å —Å–≤–æ—é IP-–∞–¥—Ä–µ—Å—É –¥–ª—è sslip.io
# PUBLIC_IP=192.168.1.102

docker compose up -d --build
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
- üåê Frontend: `http://app.<IP>.sslip.io`  
- ‚ö° API: `http://api.<IP>.sslip.io/weather?city=Kyiv`  
- üß≠ Traefik dashboard: `http://traefik.<IP>.sslip.io`

---

## üß† –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–º–∞–Ω–¥

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
docker compose ps

# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥–∏ FastAPI
docker compose logs -f weather-api

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω —Å–µ—Ä–≤—ñ—Å—É
curl "http://api.<IP>.sslip.io/health"

# –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É
docker compose down
```

---

## üß© –û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è

> –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –º—ñ—Å—Ç–æ ‚Üí API –æ—Ç—Ä–∏–º—É—î –ø–æ–≥–æ–¥—É ‚Üí Redis –∫–µ—à—É—î ‚Üí —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–∫–∞–∑—É—î ‚Üí Traefik –º–∞—Ä—à—Ä—É—Ç–∏–∑—É—î ‚Üí Docker Compose –≤—Å–µ –∑–∞–ø—É—Å–∫–∞—î.

---

## üß≠ –ü–æ–¥–∞–ª—å—à—ñ –∫—Ä–æ–∫–∏

- –î–æ–¥–∞—Ç–∏ **PostgreSQL** –¥–ª—è —ñ—Å—Ç–æ—Ä—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤  
- –û–∫—Ä–µ–º–∏–π **worker** –¥–ª—è –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–≥–æ–¥–∏  
- –î–æ–¥–∞—Ç–∏ **Prometheus + Grafana** –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É  
- –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å—ñ–≤ —á–µ—Ä–µ–∑ Cloudflare Tunnel   
- –°—Ç–≤–æ—Ä–∏—Ç–∏ **Makefile** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –∫–æ–º–∞–Ω–¥

---

